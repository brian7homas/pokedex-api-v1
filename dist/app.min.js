/* eslint-disable no-unused-vars */
let pokemonRepository=[],index=0,previousValue=document.querySelector('#search').value,isWaiting=!1;!function(){fetch('https://pokeapi.co/api/v2/pokemon/').then(function(e){return e.json();}).then(function(t){t.results.forEach(function(t){e(t);});});let e=function(e){fetch(e.url).then(function(e){return e.json();}).then(function(e){let t={id:e.id,imgUrl:e.sprites.other.dream_world.front_default,name:e.name,height:e.height,weight:e.weight,abilities:e.abilities,png:e.sprites.front_default,types:e.types},n=Object.keys(t),i=Object.keys({id:'',imgUrl:'',name:'',height:'',weight:'',abilities:'',png:'',types:''});switch(typeof t){case'object':return i.forEach((e,t)=>{if(e!=n[t])throw document.write(`'keys need to match [${n}] <br>`),new Error(`'keys need to match [${n}] <br>`);}),build(t,pokemonRepository).add(t);case'undefined':throw new Error('You need to pass an Object');default:throw new Error('The parameter needs to be an Object');}});};}();let build=function(e,t){let n=t,i=e;return function(e){let t=document.querySelector('.carousel-inner'),n=e.name,i=`<div class="carousel-item">\n    <img class="d-block w-100 h-100 main-img" src="${e.imgUrl}" alt="${e.name} slide">\n    <div class="carousel-caption d-xs-block mb-5">\n      <button type="button" class="btn btn-primary get-info" data-toggle="modal" data-target="#exampleModal2" onclick="modal()">\n        ${n}\n      </button>\n    </div>\n  </div>`;t.insertAdjacentHTML('beforeend',i),document.querySelector('.carousel-item').classList.contains('active')||document.querySelector('.carousel-item').classList.add('active');}(i),function(e){let t=document.querySelector('.carousel-indicators'),n=`<li data-target="#carouselExampleIndicators" data-slide-to="${index++}" class="carousel-indicator"><img class="indicator-img w-100" src="${e.png}" alt="${e.name}"/></li>`;t.insertAdjacentHTML('beforeend',n);}(i),{add:function(e){if(e)return n.push(e),n;}};};function searchFunction(){let e,t=document.querySelector('input#search').value,n=document.querySelector('#search-result');previousValue==t&&0==t||(clearTimeout(e),null!=t&&(isWaiting||(n.innerText='loading..'),e=setTimeout(()=>{let e=pokemonRepository.filter(e=>{if(e.name===t)return e;}),n=document.querySelector('#search-result');if(0!=e.length){n.innerText=e[0].name;let t=`\n            <a data-toggle="modal" data-target="#exampleModal2" onclick="modal('${e[0].name}')" id="search-result" class="nav-link active" href="#">\n              <div class="search-display">\n                <img class="search-display__img" src="${e[0].imgUrl}" />\n              </div>\n            </a>\n          `;return n.insertAdjacentHTML('beforeend',t);}n.innerText='No results';},850))),previousValue=t;}searchFunction();let modal=function(e=null){let t=[];if(t=pokemonRepository,null!=e){let e=document.querySelector('#search-result').innerText;e=e.trim();for(let l=0;l<t.length;l++){t[l].name===e&&function(){let e=document.querySelector('.modal'),i=document.querySelector('.modal-content'),r=document.querySelector('.modal-title'),o=document.querySelector('.modal-body img'),n=document.querySelector('.ability-list'),c=document.querySelectorAll('#abilities'),u=document.querySelectorAll('#type'),a=document.querySelector('.type-list'),m=document.querySelector('#height'),d=document.querySelector('#weight');e&&c&&(c.forEach(e=>(e.remove(),!0)),u.forEach(e=>(e.remove(),!0)));let s=t[l];r.innerText=s.name,o.setAttribute('src',`${s.imgUrl}`),m.innerText=`Height: ${s.height}`,d.innerText=`Weight: ${s.weight}`,i.setAttribute('style',`background-image: linear-gradient(to left bottom, hsla(6, 83%, 43%, 1), hsla(0, 0%, 91%, .6)), url(${s.imgUrl});`),function(){for(let e=0;e<s.abilities.length;e++){let t=`<li id="abilities" class="text-dark list-group-item">${s.abilities[e].ability.name}</li>`;n.insertAdjacentHTML('afterbegin',t);}}(),function(){for(let e=0;e<s.types.length;e++){let t=`<li id="type" class="text-dark list-group-item">${s.types[e].type.name}</li>`;a.insertAdjacentHTML('afterbegin',t);}}();}();}}else{let e=document.querySelector('div.active div button').innerText;!function(){for(let l=0;l<t.length;l++){if(t[l].name===e){let e=document.querySelector('.modal'),i=document.querySelector('.modal-content'),r=document.querySelector('.modal-title'),o=document.querySelector('.modal-body img'),n=document.querySelector('.ability-list'),c=document.querySelectorAll('#abilities'),u=document.querySelectorAll('#type'),a=document.querySelector('.type-list'),m=document.querySelector('#height'),d=document.querySelector('#weight');e&&c&&(c.forEach(e=>(e.remove(),!0)),u.forEach(e=>(e.remove(),!0)));let s=t[l];r.innerText=s.name,o.setAttribute('src',`${s.imgUrl}`),m.innerText=`Height: ${s.height}`,d.innerText=`Weight: ${s.weight}`,i.setAttribute('style',`background-image: linear-gradient(to left bottom, hsla(6, 83%, 43%, 1), hsla(0, 0%, 91%, .6)), url(${s.imgUrl});`),function(){for(let e=0;e<s.abilities.length;e++){let t=`<li id="abilities" class="text-dark list-group-item">${s.abilities[e].ability.name}</li>`;n.insertAdjacentHTML('afterbegin',t);}}(),function(){for(let e=0;e<s.types.length;e++){let t=`<li id="type" class="text-dark list-group-item">${s.types[e].type.name}</li>`;a.insertAdjacentHTML('afterbegin',t);}}();}}}();}};